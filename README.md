# demo2025

## Топология №1.

![Снимок экрана (1)](https://github.com/user-attachments/assets/37a24fe6-c981-45c7-9220-683a2d091c96)


### Таблица №2 (Операциоенные системы).

| Имя устройства | Процессор | Оперативная память | Жёский диск |     Операционная Система   |
| :------------: | :-------: |  :---------------: | :---------: |       :-------------:      |
| ISP            |  2 (ГЦ)   |        4 (ГБ)      |   8 (ГБ)    |            Eltex           |
| HQ-RTR         |  2 (ГЦ)   |        4 (ГБ)      |   6 (ГБ)    |          EcoRouter         |
| BR-RTR         |  2 (ГЦ)   |        4 (ГБ)      |   8 (ГБ)    |            Eltex           |
| HQ-SRV         |  2 (ГЦ)   |        4 (ГБ)      |  30 (ГБ)    |      ALT Linux Server      |
| BR-SRV         |  2 (ГЦ)   |        4 (ГБ)      |  30 (ГБ)    |      ALT Linux Server      |
| HQ-CLI         |  2 (ГЦ)   |        4 (ГБ)      |  30 (ГБ)    |    ALT Linux WorkStation   |


### Таблица №2 (разбита на подсети).

| Имя устройства | Итерфейс |  IPv4/IPv6   | Маска/Префикс |       Шлюз       |
| :------------: | :------: |  :---------: | :-----------: |  :-------------: |
|                | ens 192  | DHCP         | /24           | DHCP             |
| ISP            | ens 224  | 192.168.0.170| /30           |                  |
|                | ens 256  | 192.168.0.164| /30           |                  |
| HQ-RTR         | ens 192  | 192.168.0.3  | /25           |                  |
|                | ens 224  | 192.168.0.169| /30           | 192.168.0.170    |
| BR-RTR         | ens 192  | 192.168.0.130| /27           |                  |
|                | ens 224  | 192.168.0.163| /30           | 192.168.0.164    |
| HQ-SRV         | ens 192  | 192.168.0.1  | /25           | 192.168.0.3      |
| BR-CLI         | ens 192  | 192.168.0.2  | /25           | 192.168.0.3      |
| BR-SRV         | ens 192  | 192.168.0.129| /27           | 192.168.0.130    |


### 1. Настройка интерфесов на BR-SRV и HQ-SRV.

Проверить существующие адреса. `ip a`

После этого приступим к настройке статической маршрутизации  
Нужно открыть файл options для нужного интерфейса:  
```
nano /etc/net/ifaces/ens192/options
```
Там поменял все как на примере:   
```
BOOTPROTO=static
TYPE=eth
CONFIG_WIRELESS=no
SYSTEMD_BOOTPROTO=static
CONFIG_IPV4=yes
DISABLED=no
NM_CONTROLLED=no
SYSTEMD_CONTROLLED=no
```
Если нет нужного интерфейса прописыаем такую команду:
```+
mkdir /etc/net/ifaces/xxx
```
После этого задал нужный адрес на интрефейс из таблицы №2:  
```
echo xxx.xxx.xxx.xxx/xx > /etc/net/ifaces/ensxxx/ipv4address
```
Если нужно добавить шлюз по умолчанию, то нужна эта команда:  
```
echo default via xxx.xxx.xxx.xxx > /etc/net/ifaces/xxx/ipv4route
```
`Вместо x, нужно вставить IP-адрес и номер интерфейса из таблицы №2`  
Если нужно указать информацию о DNS-сервере, прописываем команду:  
```
echo nameserver 8.8.8.8 > /etc/resolv.conf
```
После этого перезагружаем сетевую службу:  
```
service network restart
```
И проверяем настройку при помощи команды `ip a`
Если на интерфейсе показывается 2 IP-адреса то  нужно отключить NetworkManager командой:
```
systemctl disable network.service NetworkManager
```
